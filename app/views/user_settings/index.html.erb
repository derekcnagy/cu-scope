<h1>Settings</h1>

<%= render "shared/menu" %>
<% if flash[:alert] %>
  <div class="alert"><%= flash[:alert] %></div>
<% end %>
<%= form_tag @user, method: :patch do %>
  <%= hidden_field_tag :id, session[:user_id] %>
  <%= hidden_field_tag :user_type, session[:user_type] %>
  <div><%= text_field_tag :username, session[:username] %></div>
  <div><%= text_field_tag :first_name, session[:first_name] %></div>
  <div><%= text_field_tag :last_name, session[:last_name] %></div>
  <div><%= text_field_tag :user_type_name, @user_type.type_name, readonly: true %></div>
  <%= hidden_field_tag :user_type, @user_type.id %>
  <div><%= select_tag 'team_selector', options_from_collection_for_select(@teams, 'id', 'team_name', session[:team]) %></div>
    <% @profiles.each do |team, profiles| %>
      <div class="profile_selector" id="team_<%= team %>_profiles"
           <% unless team.to_i.eql? session[:team].to_i %>style="display: none;"
           <% end %>>
        <%= select_tag "profile_team_#{team}", options_from_collection_for_select(profiles, 'id', 'profile_name', session[:profile]), include_blank: 'None' %>
      </div>
    <% end %>
  <div><%= submit_tag 'Update' %></div>
<% end %>

<%= form_tag '/user_settings/change_password', method: :put do %>
  <div>Old Password: <%= password_field_tag :old_password %></div>
  <div>New Password: <%= password_field_tag :new_password %></div>
  <div>Confirm Password: <%= password_field_tag :password_confirmation %></div>
  <%= submit_tag "Change Password" %>
<% end %>